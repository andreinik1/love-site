import React, { useEffect, useState } from "react";
import "./StarMap.css";
import starImage from "../../assets/star.png"; // –ö–∞—Ä—Ç–∏–Ω–∫–∞ –∑–≤–µ–∑–¥—ã

const STAR_MOMENTS = [
  "26 –æ–∫—Ç—è–±—Ä—è ‚Äî —è –≤–ø–µ—Ä–≤—ã–µ –≤—ã—Å–∫–∞–∑–∞–ª—Å—è —Ç–µ–±–µ –æ —Å–≤–æ–∏—Ö –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è—Ö, –æ —Å–≤–æ–∏—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö –∏ –º—ã—Å–ª—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ –º–µ–Ω—è –º—É—á–∞–ª–∏, –∏ —Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∞–ª–∞, —É—Å–ø–æ–∫–æ–∏–ª–∞ –º–µ–Ω—è, –∏ —Ç–æ–≥–¥–∞ —è –±—ã–ª —Ç–∞–∫ —Å—á–∞—Å—Ç–ª–∏–≤)",
  "7 –∞–≤–≥—É—Å—Ç–∞ ‚Äî —Ç–æ–≥–¥–∞ –º—ã –≤–ø–µ—Ä–≤—ã–µ, –º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, –ø—Ä–æ–æ–±—â–∞–ª–∏—Å—å –≤–µ—Å—å –¥–µ–Ω—å. –¢—ã –±—ã–ª–∞ –≤ –¥–æ—Ä–æ–≥–µ, –∏ –º—ã –≤—Å–µ —ç—Ç–æ –≤—Ä–µ–º—è –±–æ–ª—Ç–∞–ª–∏ –æ —á–µ–º-—Ç–æ, –∏–ª–∏ —è —Å–∫–∏–¥—ã–≤–∞–ª –∫–∞–∫–∏–µ-—Ç–æ —Å–≤–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤ –∏–≥—Ä–∞—Ö. –≠—Ç–æ –±—ã–ª –ø–µ—Ä–≤—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ —Ç—ã —É–¥–µ–ª–∏–ª–∞ –º–Ω–µ —Ç–∞–∫ –º–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è.",
  "2025 ‚Äî —ç—Ç–æ –ø–µ—Ä–≤—ã–π –≥–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –º—ã –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏ –≤–º–µ—Å—Ç–µ, –Ω–∞–¥–µ—é—Å—å, –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –≥–æ–¥–∞ –º—ã —Ç–æ–∂–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—Å—Ç—Ä–µ—Ç–∏–º –≤–º–µ—Å—Ç–µü•∞",
  "19 –æ–∫—Ç—è–±—Ä—è ‚Äî –≤ —ç—Ç–æ—Ç —Å—É–¥—å–±–æ–Ω–æ—Å–Ω—ã–π –¥–µ–Ω—å —è —Å–∫–∞—á–∞–ª –≤–∞–ª –∏ –∑–∞—à–µ–ª –Ω–∞ —Ç–≤–æ–π —Å–µ—Ä–≤–µ—Ä, –∫–∞–∫ –ø–æ –º–Ω–µ, —ç—Ç–æ —Ç–æ–∂–µ –±—ã–ª –≤–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –º—ã —Å—Ç–∞–ª–∏ –µ—â–µ –±–ª–∏–∂–µ, –Ω—É –∏ –∫—Å—Ç–∞—Ç–∏, –æ—Ç—á–∞—Å—Ç–∏ —ç—Ç–æ —Ç–æ–∂–µ –±—ã–ª–æ –∫–∞—Ç–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–º –Ω–∞—à–µ–π –≤—Å—Ç—Ä–µ—á–∏ –∞—Ö—Ö–∞–∞—Ö–∞—Ö",
  "31 –æ–∫—Ç—è–±—Ä—è ‚Äî –Ω–∞–≤–µ—Ä–Ω–æ–µ, –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –¥–∞—Ç, –≤–µ–¥—å —Ç–æ–≥–¥–∞ –º—ã –≤–ø–µ—Ä–≤—ã–µ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å —Å —Ç–æ–±–æ–π, –∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å –≤ 00:03 —è –ø—Ä–∏–∑–Ω–∞–ª—Å—è —Ç–µ–±–µ –≤ –ª—é–±–≤–∏ü•∞ü•∫",
  "–û–∫—Ç—è–±—Ä—å)) —ç—Ö. –ù–µ –±—É–¥–µ—Ç –ø—Ä–µ—É–≤–µ–ª–∏—á–µ–Ω–∏–µ–º, –µ—Å–ª–∏ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —ç—Ç–æ—Ç –º–µ—Å—è—Ü –±—ã–ª —Å–∞–º—ã–º —Ä–µ—à–∞—é—â–∏–º –≤ –Ω–∞—à–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö. –ü—Ä–æ—Å—Ç–æ –∑–∞–º–µ—Ç–∏–ª, –ø–æ–∫–∞ –ª–∏—Å—Ç–∞–ª –Ω–∞—à–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã, –≤ –æ–∫—Ç—è–±—Ä–µ –º—ã —Å–±–ª–∏–∑–∏–ª–∏—Å—å —Å–∏–ª—å–Ω–µ–µ –≤—Å–µ–≥–æ, –ª—é–±–∏–º–∞—èü•∞",
  "28 –Ω–æ—è–±—Ä—è ‚Äî –≤–æ–æ–±—â–µ –æ—á–µ–Ω—å –≤–∞–∂–Ω—ã–π –¥–µ–Ω—å, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å —è –æ—Å–æ–∑–Ω–∞–ª –∏ –ø—Ä–∏–∑–Ω–∞–ª—Å—è —Ç–µ–±–µ, —á—Ç–æ –º–æ–∏ —á—É–≤—Å—Ç–≤–∞ –Ω–∞—Å—Ç–æ–ª—å–∫–æ —Å–∏–ª—å–Ω—ã, —á—Ç–æ —è —Ö–æ—á—É, –Ω–µ –ø—Ä–æ—Å—Ç–æ –ª—é–±–∏—Ç—å —Ç–µ–±—è –∏ –±—ã—Ç—å –ª—é–±–∏–º—ã–º —Ç–æ–±–æ–π, –Ω–æ –∏ –≤—Å–µ–≥–¥–∞ –±—ã—Ç—å —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π –∏ —Å–≤—è–∑–∞—Ç—å –Ω–∞—à–∏ –∂–∏–∑–Ω–∏ –≤ –±—É–¥—É—â–µ–º –≤–æ–µ–¥–∏–Ω–æ. –° —Ç–æ–≥–æ –¥–Ω—è –Ω–µ –±—ã–ª–æ –Ω–∏ –µ–¥–∏–Ω–æ–≥–æ –¥–Ω—è, –∫–æ–≥–¥–∞ –±—ã —è –Ω–µ –¥—É–º–∞–ª –æ —Ç–æ–º, —á—Ç–æ —Ö–æ—á—É –≤—Å–µ–≥–¥–∞ –±—ã—Ç—å —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π",
  "–ï—â–µ –Ω–µ –∑–Ω–∞—é, –∫–∞–∫ —Ç–µ–±–µ, –Ω–æ –¥–ª—è –º–µ–Ω—è –≤–∞–∂–Ω—ã–º –∏ –∑–Ω–∞—á–∏–º—ã–º –º–æ–º–µ–Ω—Ç–æ–º —Å—Ç–∞–ª–æ, –∫–æ–≥–¥–∞ —Ç—ã –Ω–∞—á–∞–ª–∞ –¥–æ–≤–µ—Ä—è—Ç—å –º–Ω–µ –∫–∞–∫–∏–µ-—Ç–æ –ª–∏—á–Ω—ã–µ –≤–µ—â–∏, —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–ª–∞ –ø—Ä–æ —Å–≤–æ–µ –ø—Ä–æ—à–ª–æ–µ, —Å–µ–º—å—é, –∂–µ–Ω—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ç.–¥. –ü–æ –º–µ–ª–æ—á–∏, –ª—é–±–∏–º–∞—è, –Ω–æ –¥–ª—è –º–µ–Ω—è –∫–∞–∂–¥—ã–π —Ç–∞–∫–æ–π –º–æ–º–µ–Ω—Ç –±—ã–ª –±–µ–∑—É–º–Ω–æ –≤–∞–∂–µ–Ω.",
  "27 —Å–µ–Ω—Ç—è–±—Ä—è —Ç—ã —Å–∫–∞–∑–∞–ª–∞ –ø–µ—Ä–≤—ã–π —Ä–∞–∑, —á—Ç–æ –ª—é–±–∏—à—å –º–µ–Ω—è, –∞ 15 –æ–∫—Ç—è–±—Ä—è —É–∂–µ —è —Å–∫–∞–∑–∞–ª, —á—Ç–æ –ª—é–±–ª—é —Ç–µ–±—è (–ø—Ä–∞–≤–¥–∞, —Ç–æ–≥–¥–∞ –º—ã –≥–æ–≤–æ—Ä–∏–ª–∏ –ø—Ä–æ –ª—é–±–æ–≤—å –¥—Ä—É–∑–µ–π –ø—Ä–æ—Å—Ç–æ)",
  "31 –∏—é–ª—è ‚Äî –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å —Ç—ã –≤–ø–µ—Ä–≤—ã–µ –ø–æ–∑–≤–∞–ª–∞ –º–µ–Ω—è –≤ Dot–∞ 2. –ü—Ä–∏—á–µ–º —Ç—ã –ø–æ–∑–≤–∞–ª–∞, –∞ –Ω–µ —è, —è —Ç–æ–≥–¥–∞ —Ç–∞–∫ —Å—á–∞—Å—Ç–ª–∏–≤ –±—ã–ª –∞—Ö—Ö–∞—Ö–∞",
  "–ù–∞ –º–æ–µ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ —Ç–µ–±–µ –Ω–∞–¥–æ –±—ã–ª–æ –Ω–∞ —Ä–∞–±–æ—Ç—É, —Ç—ã –±—ã–ª–∞ —Å–∞–º–∞—è –ø–µ—Ä–≤–æ–π, –∫—Ç–æ –º–µ–Ω—è –ø–æ–∑–¥—Ä–∞–≤–∏–ª, —á–µ–º—É —è –±—ã–ª –±–µ–∑—É–º–Ω–æ —Ä–∞–¥, –º—è—É.",
  "26 –Ω–æ—è–±—Ä—è ‚Äî –¥–µ–Ω—å, –∫–æ–≥–¥–∞ —Ç—ã —Ä–∞–∑–æ–±—Ä–∞–ª–∞—Å—å –≤ —Å–≤–æ–∏—Ö —á—É–≤—Å—Ç–≤–∞—Ö, –∏ –Ω–∞—à–∏ —á—É–≤—Å—Ç–≤–∞ —Å—Ç–∞–ª–∏ –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–∑–∞–∏–º–Ω—ãü•∫ü•∫",
  "2 —Ñ–µ–≤—Ä–∞–ª—è ‚Äî —è —Ä–∞—Å—Å–∫–∞–∑–∞–ª –æ —Å–≤–æ–∏—Ö —Å–∞–º—ã—Ö –ø–æ—Ç–∞–µ–Ω–Ω—ã—Ö –∂–µ–ª–∞–Ω–∏—è—Ö –∏ –º–µ—á—Ç–∞—Ö) –∞–≤—ã—Ö–∞—ã—Ö–≤–∞",
  "18 –∏—é–Ω—è ‚Äî –∞—Ö–≤—ã—Ö–≤—ã—Ö–∞ –¥–∞—Ç–∞, –∫–æ–≥–¥–∞ —è —Å–¥–µ–ª–∞–ª –¥–ª—è —Ç–µ–±—è –ø–µ—Ä–≤—É—é –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é —Ñ–æ—Ç–∫—É —Å —Ç—Ä–∞–≤–æ–π —Ö–∞—ã–≤—Ö–∞ <img src='../../assets/andrei.jpg' alt='—Ñ–æ—Ç–∫–∞ —Å —Ç—Ä–∞–≤–æ–π' class='tooltip-img' />",
  "9 –∞–≤–≥—É—Å—Ç–∞ ‚Äî —Ç—ã —Å–∫–∏–Ω—É–ª–∞ —Å–≤–æ—é –º–∏–ª—É—é –º–æ—Ä–¥–∞—à–∫—É –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å) –∏ –≤ —ç—Ç–æ—Ç –∂–µ –¥–µ–Ω—å —è –≤–ø–µ—Ä–≤—ã–µ –∫–æ—Å–≤–µ–Ω–Ω–æ —Å–∫–∞–∑–∞–ª —Ç–µ–±–µ, —á—Ç–æ —Ç—ã –Ω–µ –±–µ–∑—Ä–∞–∑–ª–∏—á–Ω—ã–π –º–Ω–µ —á–µ–ª–æ–≤–µ–∫.<img src='../../assets/margo.jpg' alt='—Ç–≤–æ—è –º–æ—Ä–¥–∞—à–∫–∞' class='tooltip-img' />",
  "4 –Ω–æ—è–±—Ä—è ‚Äî —Ç—ã –≤–ø–µ—Ä–≤—ã–µ –Ω–∞–º–µ–∫–Ω—É–ª–∞, —á—Ç–æ —è —Ç–æ–∂–µ –Ω–µ –±–µ–∑—Ä–∞–∑–ª–∏—á–µ–Ω –∏ –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É —Å–∏–º–ø–∞—Ç–∏–∑–∏—Ä—É—é",
  "–¢—É—Ç —É–∂–µ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–∏–¥—É–º–∞–ª, –Ω–æ–æ–æ —è –ø—Ä–æ—Å—Ç–æ –±–µ–∑—É–º–Ω–æ —Ç–µ–±—è –ª—é–±–ª—é, –∑–∞–π–∫–∞, —Ç—ã —Å–∞–º–∞—è –ª—É—á—à–∞—è —É –º–µ–Ω—è –¥–µ–≤–æ—á–∫–∞.",
  "–û–¥–∏–Ω –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –º–æ–º–µ–Ω—Ç, –Ω–æ 1 –æ–∫—Ç—è–±—Ä—è —è —Å–∫–∏–¥—ã–≤–∞–ª —Ç–µ–±–µ –ø–æ —Ñ–∞–∫—Ç—É –≤–∏–¥–µ–æ, –≥–¥–µ —è –±—ã–ª –≤ –æ–¥–Ω–∏—Ö —Ç—Ä—É—Å–∞—Ö –∞—Ö–≤—Ö–∞—ã–≤—Ö–∞. –ù–µ —Å–∫–∞–∂—É, —á—Ç–æ –æ—á–µ–Ω—å –≤–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç, –Ω–æ —Ç–∞–∫ –∑–∞–±–∞–≤–Ω–æ, —è —Ç–æ–≥–¥–∞ —Ö–æ—Ç–µ–ª, —á—Ç–æ–±—ã —Ç—ã —Ä—ã–±–∫–æ–π –º–µ–Ω—è –Ω–∞–∑–≤–∞–ª–∞ <video src='../../assets/FirstOctoberVideo.mp4' class='tooltip-video' controls></video>",
  "3 –∞–≤–≥—É—Å—Ç–∞ ‚Äî —è –≤–ø–µ—Ä–≤—ã–µ —É—Å–ª—ã—à–∞–ª —Ç–≤–æ–π –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–π –∏ —Å–∞–º—ã–π –ª—é–±–∏–º—ã–π —Ç–µ–ø–µ—Ä—å –º–Ω–µ –≥–æ–ª–æ—Åü•∞. –¢—ã —Ç–æ–≥–¥–∞ –º–Ω–µ –ø–µ—Ä–≤–æ–µ –≥—Å –∑–∞–ø–∏—Å–∞–ª–∞, –ø—Ä–æ —Ç–æ –∫–∞–∫–∏–µ —É —Ç–µ–±—è –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –Ω–∞—à–µ–π —Å–æ–≤–º–µ—Å—Ç–Ω–æ –∏–≥—Ä—ã –≤ –¥–æ—Ç—É –∞—Ö–∞—Ö–∞—Ö",
  "2 –∏—é–Ω—è ‚Äî –¥–µ–Ω—å, –∫–æ–≥–¥–∞ –º—ã –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å) –∫—Ç–æ-—Ç–æ –ø—Ä–æ—Å—Ç–æ –∏—Å–∫–∞–ª —Å–µ–±–µ —Ç–∏–º–º–µ–π—Ç–∞ –≤ Dota 2, –∞ –Ω–∞—à–µ–ª –ª—é–±–æ–≤—å —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏ ü•∫",
  "27 –¥–µ–∫–∞–±—Ä—è ‚Äî –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å —è —É–∫—Ä–∞–ª —Ç–≤–æ–π –ø–µ—Ä–≤—ã–π –ø–æ—Ü–µ–ª—É–πüòò",
  "25 –¥–µ–∫–∞–±—Ä—è ‚Äî –Ω–∞—á–∞–ª–∏—Å—å –Ω–∞—à–∏ —Å —Ç–æ–±–æ–π –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –ª—é–±–∏–º–∞—èü•∞"
];
const TAURUS_STARS = [
  { x: "17.5%", y: "21.5%" },
  { x: "25.8%", y: "22%" },
  { x: "21.2%", y: "13.5%" },
  { x: "26.8%", y: "28%" },
  { x: "28.8%", y: "30%" },
  { x: "29.8%", y: "34.2%" },
  { x: "27.8%", y: "34%" },
  { x: "25.8%", y: "32%" },
  { x: "32.3%", y: "38%" },
  { x: "38%", y: "44.3%" },
];

const AQUARIUS_STARS = [
  { x: "50.5%", y: "50%" },
  { x: "52%", y: "46%" },
  { x: "53.3%", y: "42%" },
  { x: "52%", y: "37%" },
  { x: "53.6%", y: "32%" },
  { x: "55.8%", y: "31%" },
  { x: "57%", y: "34%" },
  { x: "59.5%", y: "31.5%" },
  { x: "62.5%", y: "36%" },
  { x: "67.3%", y: "39%" },
  { x: "57.8%", y: "40%" },
  { x: "59.5%", y: "45%" },
];

const StarMap = () => {
  const [stars, setStars] = useState([]);
  const [selectedStar, setSelectedStar] = useState(null);
  const [tooltipPos, setTooltipPos] = useState({ x: 0, y: 0 });

  useEffect(() => {
    const allStars = [...TAURUS_STARS, ...AQUARIUS_STARS].map(
      (coords, index) => ({
        id: index,
        ...coords,
        text: STAR_MOMENTS[index] || "",
        size: Math.random() * 10 + 10, // –†–∞–∑–º–µ—Ä –∑–≤–µ–∑–¥—ã –æ—Ç 10px –¥–æ 20px
        opacity: Math.random() * 0.5 + 0.5, // –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –æ—Ç 0.5 –¥–æ 1
      })
    );
    setStars(allStars);
  }, []);

  const handleStarClick = (e, star) => {
    e.stopPropagation();
    setSelectedStar(star.text);

    // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É —Å–ª–µ–≤–∞ –æ—Ç –∑–≤–µ–∑–¥—ã (—Å —É—á–µ—Ç–æ–º —Å–¥–≤–∏–≥–∞ –Ω–∞ 3 –ø–∏–∫—Å–µ–ª—è)
    const tooltipWidth = 170;
    const tooltipHeight = 150;
    const tooltipX = e.clientX - tooltipWidth - 280; // 3px —Å–ª–µ–≤–∞ –æ—Ç –∑–≤–µ–∑–¥—ã
    const tooltipY = e.clientY - tooltipHeight / 2 - 320; // –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∑–≤–µ–∑–¥—ã

    setTooltipPos({ x: tooltipX, y: tooltipY });
  };

  const closeTooltip = (e) => {
    if (e.target.classList.contains("tooltip")) return;
    setSelectedStar(null);
  };

  const formatTextWithMedia = (text) => {
    return text.replace(
      /<img src='(.*?)' alt='(.*?)' class='tooltip-img' \/>/g,
      (match, p1, p2) => {
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–∞—Ä—Ç–∏–Ω–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø—É—Ç–∏
        const imageUrl = require(`../../assets/${p1.split('/').pop()}`);
        return `<img src="${imageUrl}" alt="${p2}" class="tooltip-img" />`;
      }
    ).replace(
      /<video src='(.*?)' class='tooltip-video' controls><\/video>/g,
      (match, p1) => {
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∏–¥–µ–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø—É—Ç–∏
        const videoUrl = require(`../../assets/${p1.split('/').pop()}`);
        return `<video src="${videoUrl}" class="tooltip-video" controls></video>`;
      }
    );
  };

  return (
    <div className="star-map" onClick={closeTooltip}>
      {stars.map((star) => (
        <img
          key={star.id}
          src={starImage}
          className="star"
          style={{
            left: star.x,
            top: star.y,
            width: `${star.size}px`,
            height: `${star.size}px`,
            opacity: star.opacity,
          }}
          onClick={(e) => handleStarClick(e, star)}
          alt="Star"
        />
      ))}
      {selectedStar && (
        <div
          className="tooltip active"
          style={{ left: tooltipPos.x, top: tooltipPos.y }}
        >
          <div className="tooltip-content">
            <div
              className="tooltip-text"
              dangerouslySetInnerHTML={{
                __html: formatTextWithMedia(selectedStar),
              }}
            />
          </div>
        </div>
      )}
    </div>
  );
};

export default StarMap;
